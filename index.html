<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SmartSched â€“ Carleton University Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f5f7fa; }
    header { background:#8B0000; color:#fff; padding:20px; text-align:center; }
    .welcome { background:#fff; padding:15px; text-align:center; font-size:18px; }
    .summary-bar { display:flex; justify-content:space-between; background:#fff; padding:10px 20px; border-top:1px solid #ddd; border-bottom:1px solid #ddd; }
    .summary-bar strong { color:#8B0000; }
    .progress { display:flex; justify-content:space-between; margin:20px; position:relative; }
    .progress::before { content:''; position:absolute; top:12px; left:12px; right:12px; height:4px; background:#ccc; z-index:-1; }
    .step { text-align:center; flex:1; }
    .circle { width:24px; height:24px; border-radius:50%; background:#ccc; margin:0 auto; line-height:24px; color:#fff; }
    .active .circle { background:#8B0000; }
    .container { max-width:900px; margin:auto; padding:20px; }
    .section { display:none; }
    .section.active { display:block; }
    .card { background:#fff; padding:20px; border:1px solid #ddd; border-radius:8px; margin-bottom:20px; }
    .btn { background:#8B0000; color:#fff; padding:10px 20px; border:none; border-radius:4px; cursor:pointer; }
    .btn:hover { background:#600000; }
    .note { font-size:13px; color:#555; margin-top:10px; }
    .legend { display:flex; gap:15px; font-size:13px; margin-top:10px; }
    .legend-swatch { width:16px; height:16px; border-radius:4px; display:inline-block; }
    .lecture { background:#4CAF50; }
    .tutorial { background:#2196F3; }
    .lab { background:#FF9800; }
    .timetable { display:grid; grid-template-columns:repeat(5,1fr); gap:6px; margin-top:10px; }
    .block { height:40px; border-radius:4px; color:#fff; font-size:11px; padding:4px; }
    .breakdown-item { padding:8px; border:1px dashed #ccc; border-radius:6px; margin:4px 0; background:#fff; }
  </style>
</head>
<body>

<header>
  <h1>SmartSched â€“ Carleton University</h1>
  <p>Smarter schedules, stronger success</p>
</header>

<div class="welcome">
  ðŸ‘‹ Welcome Sam (Mechanical Engineering student)<br>
  First Year Â· First Semester Â· Fall Term
</div>

<div class="summary-bar">
  <div>Selected courses: <strong id="selectedCount">0</strong></div>
  <div>Estimated credits: <strong id="creditTotal">0.0</strong></div>
</div>

<div class="progress">
  <div class="step" id="progress1"><div class="circle">1</div><p>Courses</p></div>
  <div class="step" id="progress2"><div class="circle">2</div><p>Preferences</p></div>
  <div class="step" id="progress3"><div class="circle">3</div><p>Options</p></div>
  <div class="step" id="progress4"><div class="circle">4</div><p>Confirm</p></div>
</div>

<div class="container">

  <!-- Step 1 -->
  <div id="step1" class="section active">
    <h2>Step 1: Select Your Fall Term Courses</h2>
    <div class="card">
      <label><input type="checkbox" class="course-input" data-code="MATH 1004" data-title="Calculus" data-credits="0.5"> MATH 1004 â€“ Calculus</label><br>
      <label><input type="checkbox" class="course-input" data-code="MATH 1104" data-title="Linear Algebra" data-credits="0.5"> MATH 1104 â€“ Linear Algebra</label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1031" data-title="Programming" data-credits="0.5"> ECOR 1031 â€“ Programming</label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1032" data-title="Circuits" data-credits="0.5"> ECOR 1032 â€“ Circuits</label><br>
      <label>
        <input type="checkbox" id="electiveToggle" class="course-input" data-code="Basic Science Elective" data-title="Basic Science Elective" data-credits="0.5">
        Basic Science Elective
        <select id="electiveSelect" disabled>
          <option value="">Select elective</option>
          <option value="CHEM 1101 â€” Chemistry I">CHEM 1101 â€” Chemistry I</option>
          <option value="BIOL 1103 â€” Biology I">BIOL 1103 â€” Biology I</option>
          <option value="ERTH 1006 â€” Earth Science">ERTH 1006 â€” Earth Science</option>
        </select>
      </label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1055" data-title="Intro Eng Disciplines I" data-credits="0.0"> ECOR 1055 â€“ Intro Eng Disciplines I</label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1057" data-title="Engineering Profession" data-credits="0.0"> ECOR 1057 â€“ Engineering Profession</label>

      <div class="legend">
        <div><span class="legend-swatch lecture"></span> Lecture</div>
        <div><span class="legend-swatch tutorial"></span> Tutorial</div>
        <div><span class="legend-swatch lab"></span> Lab</div>
      </div>

      <p class="note">Note: Some courses include tutorials (e.g., MATH 1004/1104) and some include labs (e.g., ECOR 1031/1032). These will be scheduled automatically.</p>
    </div>
    <button class="btn" onclick="nextStep('step2',2)">Next â†’</button>
  </div>   <!-- Step 2 -->
  <div id="step2" class="section">
    <h2>Step 2: Preferences</h2>
    <div class="card">
      <label><input type="checkbox" class="pref" data-key="noEarly"> No classes before 10am</label><br>
      <label><input type="checkbox" class="pref" data-key="compact"> Compact schedule</label><br>
      <label><input type="checkbox" class="pref" data-key="minBreaks"> Minimize breaks</label>
      <p class="note">Preferences guide how lectures, tutorials, and labs are arranged in options below.</p>
    </div>
    <button class="btn" onclick="nextStep('step3',3)">Next â†’</button>
  </div>

  <!-- Step 3 -->
  <div id="step3" class="section">
    <h2>Step 3: Timetable Options</h2>
    <div class="card">
      <h3>Option A</h3>
      <div id="optionA" class="timetable"></div>
      <button class="btn selectBtn" data-option="A">Select Option A</button>
    </div>
    <div class="card">
      <h3>Option B</h3>
      <div id="optionB" class="timetable"></div>
      <button class="btn selectBtn" data-option="B">Select Option B</button>
    </div>
    <div class="card">
      <h3>Option C</h3>
      <div id="optionC" class="timetable"></div>
      <button class="btn selectBtn" data-option="C">Select Option C</button>
    </div>
  </div>   <!-- Step 4 -->
  <div id="confirmation" class="section">
    <h2>Schedule Confirmed</h2>
    <p id="chosenText"></p>
    <div id="preview" class="timetable"></div>
    <div id="breakdown"></div>
    <button class="btn" onclick="restart()">Back to Start</button>
  </div>

</div> <!-- end .container -->

<script>
  // Section data for realistic variation
  const courseSections = {
    "MATH 1004": {
      lectures: [
        { label: "MATH 1004 Lec A", day: 0 },
        { label: "MATH 1004 Lec B", day: 2 },
        { label: "MATH 1004 Lec C", day: 4 }
      ],
      tutorials: [
        { label: "MATH 1004 Tut A", day: 1 },
        { label: "MATH 1004 Tut B", day: 3 }
      ]
    },
    "MATH 1104": {
      lectures: [
        { label: "MATH 1104 Lec A", day: 1 },
        { label: "MATH 1104 Lec B", day: 3 }
      ],
      tutorials: [
        { label: "MATH 1104 Tut A", day: 4 }
      ]
    },
    "ECOR 1031": {
      lectures: [
        { label: "ECOR 1031 Lec A", day: 0 },
        { label: "ECOR 1031 Lec B", day: 2 }
      ],
      labs: [
        { label: "ECOR 1031 Lab A", day: 1 },
        { label: "ECOR 1031 Lab B", day: 3 }
      ]
    },
    "ECOR 1032": {
      lectures: [
        { label: "ECOR 1032 Lec A", day: 1 },
        { label: "ECOR 1032 Lec B", day: 3 }
      ],
      labs: [
        { label: "ECOR 1032 Lab A", day: 2 },
        { label: "ECOR 1032 Lab B", day: 4 }
      ]
    }
  };

  // Summary bar
  function updateSummary() {
    const inputs = document.querySelectorAll('.course-input');
    let count = 0, credits = 0;
    inputs.forEach(input => {
      if (input.checked) {
        count++;
        credits += parseFloat(input.dataset.credits || '0');
      }
    });
    document.getElementById('selectedCount').textContent = count;
    document.getElementById('creditTotal').textContent = credits.toFixed(1);
  }

  // Elective dropdown toggle
  const electiveToggle = document.getElementById('electiveToggle');
  const electiveSelect = document.getElementById('electiveSelect');
  electiveToggle.addEventListener('change', () => {
    electiveSelect.disabled = !electiveToggle.checked;
    if (!electiveToggle.checked) electiveSelect.value = '';
    updateSummary();
  });
  document.querySelectorAll('.course-input').forEach(el => el.addEventListener('change', updateSummary));
  updateSummary();

  // Navigation
  function nextStep(stepId, progressNum) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(stepId).classList.add('active');
    updateProgress(progressNum);
    if (stepId === 'step3') buildOptions();
  }
  function updateProgress(step) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    document.getElementById('progress' + step).classList.add('active');
  }
  function restart() {
    nextStep('step1',1);
    electiveToggle.checked = false;
    electiveSelect.disabled = true;
    electiveSelect.value = '';
    document.querySelectorAll('.course-input').forEach(el => el.checked = false);
    document.querySelectorAll('.pref').forEach(el => el.checked = false);
    ['optionA','optionB','optionC','preview','breakdown'].forEach(id => document.getElementById(id).innerHTML = '');
    document.getElementById('chosenText').textContent = '';
    updateSummary();
  }

  // Helpers
  function getSelectedCourses() {
    const inputs = document.querySelectorAll('.course-input');
    const courses = [];
    inputs.forEach(input => {
      if (input.checked) {
        const code = input.dataset.code;
        let title = input.dataset.title;
        if (code === 'Basic Science Elective' && electiveSelect.value) {
          title = electiveSelect.value;
        }
        courses.push({ code, title });
      }
    });
    return courses;
  }

  function pickSections(course, variant) {
    const sections = courseSections[course.code];
    const chosen = [];
    if (sections) {
      if (sections.lectures) {
        const lec = sections.lectures[variant % sections.lectures.length];
        chosen.push({ type:'lecture', label:lec.label, col:lec.day });
      }
      if (sections.tutorials) {
        const tut = sections.tutorials[variant % sections.tutorials.length];
        chosen.push({ type:'tutorial', label:tut.label, col:tut.day });
      }
      if (sections.labs) {
        const lab = sections.labs[variant % sections.labs.length];
        chosen.push({ type:'lab', label:lab.label, col:lab.day });
      }
    }
    return chosen;
  }

  function renderTimetable(containerId, courses, variant) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    let blocks = [];
    courses.forEach(c => { blocks = blocks.concat(pickSections(c, variant)); });
    blocks.forEach(b => {
      const div = document.createElement('div');
      div.className = `block ${b.type}`;
      div.style.gridColumn = (b.col+1);
      div.textContent = b.label;
      container.appendChild(div);
    });
    if (blocks.length===0) container.innerHTML = '<p class="note">No courses selected yet.</p>';
  }

  function buildOptions() {
    const courses = getSelectedCourses();
    renderTimetable('optionA', courses, 0);
    renderTimetable('optionB', courses, 1);
    renderTimetable('optionC', courses, 2);
  }

  // Confirmation
  document.querySelectorAll('.selectBtn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      const chosen = btn.dataset.option;
      const courses = getSelectedCourses();
      document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
      document.getElementById('confirmation').classList.add('active');
      updateProgress(4);
      document.getElementById('chosenText').innerHTML = `You selected <strong>Option ${chosen}</strong>.`;
      renderTimetable('preview', courses, chosen==='A'?0:chosen==='B'?1:2);
      const breakdown = document.getElementById('breakdown');
      breakdown.innerHTML='';
      courses.forEach(c=>{
        const comps = pickSections(c, chosen==='A'?0:chosen==='B'?1:2).map(x=>x.type).join(' + ');
        const div=document.createElement('div');
        div.className='breakdown-item';
        div.textContent=`${c.code} â€” ${c.title}: ${comps}`;
        breakdown.appendChild(div);
      });
    });
  });
</script>
</body>
</html>

