<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SmartSched â€“ Carleton University Demo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --carleton-red: #8B0000;
      --carleton-red-dark: #600000;
      --bg: #f5f7fa;
      --card: #ffffff;
      --text: #333333;
      --border: #dddddd;
      --muted: #777777;
      --line: #cccccc;
      --lecture: #4CAF50;
      --tutorial: #2196F3;
      --lab: #FF9800;
    }

    * { box-sizing: border-box; }
    body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: var(--bg); color: var(--text); }

    header {
      background: var(--carleton-red);
      color: #fff;
      padding: 20px;
      text-align: center;
    }
    header h1 { margin: 0; font-size: 28px; }
    header p { margin: 6px 0 0; font-size: 16px; }

    .welcome {
      background: var(--card);
      padding: 18px 20px;
      text-align: center;
      font-size: 18px;
      color: var(--text);
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }

    .summary-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: #fff;
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
      color: var(--muted);
      font-size: 14px;
    }
    .summary-item strong { color: var(--carleton-red); }

    .progress {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 26px 20px;
      position: relative;
    }
    .progress::before {
      content: '';
      position: absolute;
      top: 12px;
      left: 12px;
      right: 12px;
      height: 4px;
      background: var(--line);
      z-index: -1;
      border-radius: 2px;
    }
    .step {
      text-align: center;
      flex: 1;
      position: relative;
    }
    .circle {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--line);
      margin: 0 auto;
      line-height: 24px;
      color: #fff;
      font-size: 13px;
      font-weight: 700;
      z-index: 1;
      position: relative;
    }
    .active .circle { background: var(--carleton-red); }
    .step p { margin: 8px 0 0; font-size: 13px; color: var(--muted); }
    .active p { color: var(--carleton-red); font-weight: 600; }

    .container { padding: 30px; max-width: 980px; margin: auto; }
    .section { display: none; }
    .section.active { display: block; }

    .card {
      background: var(--card);
      border: 1px solid var(--border);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.06);
    }

    .btn {
      background: var(--carleton-red);
      color: #fff;
      padding: 10px 18px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 12px;
      font-weight: 600;
    }
    .btn:hover { background: var(--carleton-red-dark); }

    .note {
      font-size: 13px;
      color: var(--muted);
      margin-top: 10px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 16px;
    }

    .legend {
      display: flex;
      gap: 16px;
      align-items: center;
      flex-wrap: wrap;
      margin-top: 6px;
      font-size: 13px;
      color: var(--muted);
    }
    .legend-item { display: inline-flex; align-items: center; gap: 8px; }
    .legend-swatch { width: 16px; height: 16px; border-radius: 4px; display: inline-block; }

    .timetables { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
    @media (max-width: 900px) { .timetables { grid-template-columns: 1fr; } }

    .timetable {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 6px;
      margin-top: 10px;
    }

    /* Slide-in animation for blocks */
    @keyframes slideIn {
      from { transform: translateY(12px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .block {
      height: 42px;
      border-radius: 6px;
      position: relative;
      transition: transform 200ms ease, box-shadow 200ms ease;
      animation: slideIn 320ms ease both;
    }
    .block:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,0.08); }
    .block span {
      position: absolute;
      bottom: 6px; left: 8px;
      font-size: 11px;
      color: #fff;
      text-shadow: 0 1px 2px rgba(0,0,0,0.3);
      pointer-events: none;
    }
    .lecture { background: var(--lecture); }
    .tutorial { background: var(--tutorial); }
    .lab { background: var(--lab); }

    .divider { border-top: 2px solid var(--line); margin: 26px 0; }

    .breakdown-list {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
      font-size: 14px;
    }
    .breakdown-item { padding: 10px; border: 1px dashed var(--border); border-radius: 8px; background: #fff; }
    .muted { color: var(--muted); font-size: 12px; }

    .inline {
      display: flex; gap: 10px; align-items: center; flex-wrap: wrap;
      margin-top: 8px;
    }
    select, .pill {
      padding: 8px 10px; border-radius: 6px; border: 1px solid var(--border); background: #fff; font-size: 14px;
    }
    .pill { color: var(--muted); }
  </style>
</head>
<body>

  <header>
    <h1>SmartSched â€“ Carleton University</h1>
    <p>Smarter schedules, stronger success</p>
  </header>

  <div class="welcome">
    ðŸ‘‹ Welcome Sam (Mechanical Engineering student)<br />
    First Year Â· First Semester Â· Fall Term
  </div>

  <div class="summary-bar">
    <div class="summary-item">Selected courses: <strong id="selectedCount">6</strong></div>
    <div class="summary-item">Estimated credits: <strong id="creditTotal">2.5</strong></div>
  </div>

  <div class="progress">
    <div class="step" id="progress1"><div class="circle">1</div><p>Courses</p></div>
    <div class="step" id="progress2"><div class="circle">2</div><p>Preferences</p></div>
    <div class="step" id="progress3"><div class="circle">3</div><p>Options</p></div>
    <div class="step" id="progress4"><div class="circle">4</div><p>Confirm</p></div>
  </div>

  <div class="container">
    <!-- Step 1: Courses -->
    <div id="step1" class="section active">
      <h2>Step 1: Select your Fall term courses</h2>
      <div class="card">
        <div class="grid">
          <div>
            <label>
              <input type="checkbox" class="course-input" data-code="MATH 1004" data-title="Calculus for Engineering Students" data-components="lecture,tutorial" data-credits="0.5" checked />
              MATH 1004 â€“ Calculus for Engineering Students
            </label><br />
            <label>
              <input type="checkbox" class="course-input" data-code="MATH 1104" data-title="Linear Algebra for Engineering Students" data-components="lecture,tutorial" data-credits="0.5" checked />
              MATH 1104 â€“ Linear Algebra for Engineering Students
            </label><br />
            <label>
              <input type="checkbox" class="course-input" data-code="ECOR 1031" data-title="Programming & Data Management" data-components="lecture,lab" data-credits="0.5" checked />
              ECOR 1031 â€“ Programming & Data Management
            </label><br />
            <label>
              <input type="checkbox" class="course-input" data-code="ECOR 1032" data-title="Circuits & Mechatronics" data-components="lecture,lab" data-credits="0.5" checked />
              ECOR 1032 â€“ Circuits & Mechatronics
            </label><br />
          </div>
          <div>
            <label class="inline">
              <input type="checkbox" id="electiveToggle" class="course-input" data-code="Basic Science Elective" data-title="Basic Science Elective" data-components="lecture,lab" data-credits="0.5" />
              <span>Basic Science Elective</span>
              <select id="electiveSelect" disabled title="Select your elective">
                <option value="" selected>Select elective</option>
                <option value="CHEM 1101 â€” Chemistry I">CHEM 1101 â€” Chemistry I</option>
                <option value="BIOL 1103 â€” Foundations of Biology I">BIOL 1103 â€” Foundations of Biology I</option>
                <option value="ERTH 1006 â€” Exploring Planet Earth">ERTH 1006 â€” Exploring Planet Earth</option>
              </select>
              <span class="pill">Components: Lecture + Lab</span>
            </label>
            <br />
            <label>
              <input type="checkbox" class="course-input" data-code="ECOR 1055" data-title="Introduction to Engineering Disciplines I" data-components="lecture" data-credits="0.0" checked />
              ECOR 1055 â€“ Intro to Engineering Disciplines I (0.0 credit)
            </label><br />
            <label>
              <input type="checkbox" class="course-input" data-code="ECOR 1057" data-title="Engineering Profession" data-components="lecture" data-credits="0.0" checked />
              ECOR 1057 â€“ Engineering Profession (0.0 credit)
            </label><br />
          </div>
        </div>

        <div class="legend">
          <div class="legend-item"><span class="legend-swatch" style="background: var(--lecture)"></span> Lecture</div>
          <div class="legend-item"><span class="legend-swatch" style="background: var(--tutorial)"></span> Tutorial</div>
          <div class="legend-item"><span class="legend-swatch" style="background: var(--lab)"></span> Lab</div>
        </div>

        <p class="note">Some courses include tutorials (e.g., MATH 1004/1104) and others include labs (e.g., ECOR 1031/1032). Your timetable options will automatically include the required components.</p>
      </div>
      <button class="btn" onclick="nextStep('step2', 2)">Next â†’</button>
    </div>

    <div class="divider"></div>

    <!-- Step 2: Preferences -->
    <div id="step2" class="section">
      <h2>Step 2: Set your preferences</h2>
      <div class="card">
        <label><input type="checkbox" class="pref" data-key="noEarly" /> No classes before 10am</label><br />
        <label><input type="checkbox" class="pref" data-key="minBreaks" /> Minimize breaks between sessions</label><br />
        <label><input type="checkbox" class="pref" data-key="compact" /> Compact schedule (finish earlier)</label><br />
        <label><input type="checkbox" class="pref" data-key="avoidBackToBackLabs" /> Avoid back-to-back labs</label>
        <p class="note">Preferences guide how lectures, tutorials, and labs are arranged in the options below.</p>
      </div>
      <button class="btn" onclick="nextStep('step3', 3)">Next â†’</button>
    </div>

    <div class="divider"></div>

    <!-- Step 3: Options -->
    <div id="step3" class="section">
      <h2>Step 3: Optimized timetable options</h2>
      <div class="timetables">
        <div class="card">
          <h3>Option A â€” Compact, early finish</h3>
          <div id="optionA" class="timetable"></div>
          <p class="note">Leans earlier in the day, groups tutorials after lectures where possible.</p>
          <button class="btn selectBtn" data-option="A">Select Option A</button>
        </div>
        <div class="card">
          <h3>Option B â€” Balanced workload</h3>
          <div id="optionB" class="timetable"></div>
          <p class="note">Distributes lectures/tutorials/labs across the week to reduce daily intensity.</p>
          <button class="btn selectBtn" data-option="B">Select Option B</button>
        </div>
        <div class="card">
          <h3>Option C â€” Late start, minimal breaks</h3>
          <div id="optionC" class="timetable"></div>
          <p class="note">Starts later, tries to cluster sessions to avoid long waits.</p>
          <button class="btn selectBtn" data-option="C">Select Option C</button>
        </div>
      </div>
    </div>

    <!-- Confirmation -->
    <div id="confirmation" class="section">
      <h2>SmartSched â€” Schedule confirmed</h2>
      <div class="card">
        <p id="chosenText"></p>
        <div id="preview" class="timetable"></div>
        <div class="breakdown-list" id="breakdown"></div>
        <div style="margin-top:16px;">
          <button class="btn" onclick="alert('ðŸ“… Added to calendar (mock)!')">Add to calendar</button>
          <button class="btn" onclick="alert('ðŸ“„ PDF downloaded (mock)!')">Download PDF</button>
          <button class="btn" onclick="alert('ðŸ“§ Shared with advisor (mock)!')">Share with advisor</button>
        </div>
        <p class="muted" style="margin-top:10px;">Note: Exports are mock actions for demo purposes.</p>
      </div>
      <button class="btn" onclick="restart()">Back to start</button>
    </div>
  </div>

  <script>
    // Elective toggle enables/disables dropdown
    const electiveToggle = document.getElementById('electiveToggle');
    const electiveSelect = document.getElementById('electiveSelect');
    electiveToggle.addEventListener('change', () => {
      electiveSelect.disabled = !electiveToggle.checked;
      updateSummary();
    });
    electiveSelect.addEventListener('change', updateSummary);

    // Summary bar: selected count + credits
    function updateSummary() {
      const inputs = Array.from(document.querySelectorAll('.course-input'));
      let count = 0;
      let credits = 0;
      inputs.forEach(input => {
        if (input.checked) {
          count += 1;
          credits += parseFloat(input.dataset.credits || '0');
        }
      });

      // If elective is checked and dropdown has a value, adjust the title used
      if (electiveToggle.checked && electiveSelect.value) {
        electiveToggle.dataset.title = electiveSelect.value;
      } else {
        electiveToggle.dataset.title = 'Basic Science Elective';
      }

      document.getElementById('selectedCount').textContent = count;
      document.getElementById('creditTotal').textContent = credits.toFixed(1);
    }
    document.querySelectorAll('.course-input').forEach(el => el.addEventListener('change', updateSummary));
    updateSummary();

    // Collect selected courses from Step 1
    function getSelectedCourses() {
      const inputs = document.querySelectorAll('.course-input');
      const courses = [];
      inputs.forEach(input => {
        if (input.checked) {
          const code = input.dataset.code;
          const title = input.dataset.title;
          const comps = input.dataset.components.split(',');
          courses.push({ code, title, components: comps });
        }
      });
      return courses;
    }

    // Generate blocks for a course components with tooltips and labels
    function blocksForCourse(course, dayOffset = 0, preferLate = false) {
      const blocks = [];
      course.components.forEach((comp, idx) => {
        const labelShort = comp === 'lecture' ? 'Lec' : comp === 'tutorial' ? 'Tut' : 'Lab';
        // choose column with offset; if preferLate, bias toward later columns
        const base = preferLate ? 3 : 0;
        blocks.push({
          type: comp,
          title: `${course.code} ${labelShort}`,
          tooltip: `${course.code} â€” ${course.title} (${comp})`,
          col: ((idx + dayOffset + base) % 5)
        });
      });
      return blocks;
    }

    // Render a timetable into a container for a given arrangement strategy
    function renderTimetable(containerId, courses, strategy = 'compact', prefs = {}) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      let allBlocks = [];

      courses.forEach((c, ci) => {
        const dayOffset =
          strategy === 'compact' ? ci % 2 :
          strategy === 'balanced' ? ci % 5 :
          strategy === 'late' ? (ci + 2) % 5 : 0;

        const preferLate = strategy === 'late' || (prefs.noEarly && strategy !== 'compact');
        const blocks = blocksForCourse(c, dayOffset, preferLate);
        allBlocks = allBlocks.concat(blocks);
      });

      // Simple spacing rule: if avoidBackToBackLabs, push lab columns one step
      if (prefs.avoidBackToBackLabs) {
        allBlocks = allBlocks.map(b => b.type === 'lab' ? { ...b, col: (b.col + 1) % 5 } : b);
      }

      allBlocks.forEach((b, i) => {
        const div = document.createElement('div');
        div.className = `block ${b.type}`;
        div.title = b.tooltip;
        div.style.gridColumn = (b.col + 1);
        div.style.animationDelay = `${(i % 6) * 60}ms`;
        div.innerHTML = `<span>${b.title}</span>`;
        container.appendChild(div);
      });
    }

    // Read preferences
    function getPrefs() {
      const prefs = {};
      document.querySelectorAll('.pref').forEach(p => {
        prefs[p.dataset.key] = p.checked;
      });
      return prefs;
    }

    // Build options when Step 3 is shown
    function buildOptions() {
      const courses = getSelectedCourses();
      const prefs = getPrefs();
      renderTimetable('optionA', courses, 'compact', prefs);
      renderTimetable('optionB', courses, 'balanced', prefs);
      renderTimetable('optionC', courses, 'late', prefs);
    }

    // Navigation and progress
    function updateProgress(step) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      document.getElementById('progress' + step).classList.add('active');
    }
    function nextStep(stepId, progressNum) {
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(stepId).classList.add('active');
      updateProgress(progressNum);
      if (stepId === 'step3') buildOptions();
    }
    function restart() {
      nextStep('step1', 1);
    }

    // Selection -> Confirmation
    document.querySelectorAll('.selectBtn').forEach(btn => {
      btn.addEventListener('click', () => {
        const chosen = btn.dataset.option;
        const courses = getSelectedCourses();
        const prefs = getPrefs();
        const strategy = chosen === 'A' ? 'compact' : chosen === 'B' ? 'balanced' : 'late';

        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById('confirmation').classList.add('active');
        updateProgress(4);

        document.getElementById('chosenText').innerHTML =
          `You selected <strong>Option ${chosen}</strong>. Lectures, tutorials, and labs for your courses are included.`;

        renderTimetable('preview', courses, strategy, prefs);

        const breakdown = document.getElementById('breakdown');
        breakdown.innerHTML = '';
        courses.forEach(c => {
          const compText = c.components.map(x =>
            x === 'lecture' ? 'Lecture' : x === 'tutorial' ? 'Tutorial' : 'Lab'
          ).join(' + ');
          const item = document.createElement('div');
          item.className = 'breakdown-item';
          item.textContent = `${c.code} â€” ${c.title}: ${compText}`;
          breakdown.appendChild(item);
        });
      });
    });
  </script>
</body>
</html>
