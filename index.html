<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SmartSched â€“ Carleton University Demo</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f5f7fa; }
    header { background:#8B0000; color:#fff; padding:20px; text-align:center; }
    .welcome { background:#fff; padding:15px; text-align:center; font-size:18px; }
    .summary-bar { display:flex; justify-content:space-between; background:#fff; padding:10px 20px; border-top:1px solid #ddd; border-bottom:1px solid #ddd; }
    .summary-bar strong { color:#8B0000; }
    .progress { display:flex; justify-content:space-between; margin:20px; position:relative; }
    .progress::before { content:''; position:absolute; top:12px; left:12px; right:12px; height:4px; background:#ccc; z-index:-1; }
    .step { text-align:center; flex:1; }
    .circle { width:24px; height:24px; border-radius:50%; background:#ccc; margin:0 auto; line-height:24px; color:#fff; }
    .active .circle { background:#8B0000; }
    .container { max-width:900px; margin:auto; padding:20px; }
    .section { display:none; }
    .section.active { display:block; }
    .card { background:#fff; padding:20px; border:1px solid #ddd; border-radius:8px; margin-bottom:20px; }
    .btn { background:#8B0000; color:#fff; padding:10px 20px; border:none; border-radius:4px; cursor:pointer; }
    .btn:hover { background:#600000; }
    .note { font-size:13px; color:#555; margin-top:10px; }
    .legend { display:flex; gap:15px; font-size:13px; margin-top:10px; }
    .legend-swatch { width:16px; height:16px; border-radius:4px; display:inline-block; }
    .lecture { background:#4CAF50; }
    .tutorial { background:#2196F3; }
    .lab { background:#FF9800; }
    .timetable { display:grid; grid-template-columns:repeat(5,1fr); gap:6px; margin-top:10px; }
    .block { height:40px; border-radius:4px; color:#fff; font-size:11px; padding:4px; }
    .breakdown-item { padding:8px; border:1px dashed #ccc; border-radius:6px; margin:4px 0; background:#fff; }
  </style>
</head>
<body>

<header>
  <h1>SmartSched â€“ Carleton University</h1>
  <p>Smarter schedules, stronger success</p>
</header>

<div class="welcome">
  ðŸ‘‹ Welcome Sam (Mechanical Engineering student)<br>
  First Year Â· First Semester Â· Fall Term
</div>

<div class="summary-bar">
  <div>Selected courses: <strong id="selectedCount">0</strong></div>
  <div>Estimated credits: <strong id="creditTotal">0.0</strong></div>
</div>

<div class="progress">
  <div class="step" id="progress1"><div class="circle">1</div><p>Courses</p></div>
  <div class="step" id="progress2"><div class="circle">2</div><p>Preferences</p></div>
  <div class="step" id="progress3"><div class="circle">3</div><p>Options</p></div>
  <div class="step" id="progress4"><div class="circle">4</div><p>Confirm</p></div>
</div>

<div class="container">

  <!-- Step 1 -->
  <div id="step1" class="section active">
    <h2>Step 1: Select Your Fall Term Courses</h2>
    <div class="card">
      <label><input type="checkbox" class="course-input" data-code="MATH 1004" data-title="Calculus for Engineering Students" data-components="lecture,tutorial" data-credits="0.5"> MATH 1004 â€“ Calculus for Engineering Students</label><br>
      <label><input type="checkbox" class="course-input" data-code="MATH 1104" data-title="Linear Algebra for Engineering Students" data-components="lecture,tutorial" data-credits="0.5"> MATH 1104 â€“ Linear Algebra for Engineering Students</label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1031" data-title="Programming & Data Management" data-components="lecture,lab" data-credits="0.5"> ECOR 1031 â€“ Programming & Data Management</label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1032" data-title="Circuits & Mechatronics" data-components="lecture,lab" data-credits="0.5"> ECOR 1032 â€“ Circuits & Mechatronics</label><br>
      <label>
        <input type="checkbox" id="electiveToggle" class="course-input" data-code="Basic Science Elective" data-title="Basic Science Elective" data-components="lecture,lab" data-credits="0.5">
        Basic Science Elective
        <select id="electiveSelect" disabled>
          <option value="">Select elective</option>
          <option value="CHEM 1101 â€” Chemistry I">CHEM 1101 â€” Chemistry I</option>
          <option value="BIOL 1103 â€” Biology I">BIOL 1103 â€” Biology I</option>
          <option value="ERTH 1006 â€” Earth Science">ERTH 1006 â€” Earth Science</option>
        </select>
      </label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1055" data-title="Intro to Engineering Disciplines I" data-components="lecture" data-credits="0.0"> ECOR 1055 â€“ Intro to Engineering Disciplines I</label><br>
      <label><input type="checkbox" class="course-input" data-code="ECOR 1057" data-title="Engineering Profession" data-components="lecture" data-credits="0.0"> ECOR 1057 â€“ Engineering Profession</label>

      <div class="legend">
        <div><span class="legend-swatch lecture"></span> Lecture</div>
        <div><span class="legend-swatch tutorial"></span> Tutorial</div>
        <div><span class="legend-swatch lab"></span> Lab</div>
      </div>

      <p class="note">Note: Some courses include tutorials (e.g., MATH 1004/1104) and some include labs (e.g., ECOR 1031/1032). These will be scheduled automatically in your timetable.</p>
    </div>
    <button class="btn" onclick="nextStep('step2',2)">Next â†’</button>
  </div>

  <!-- Step 2 -->
  <div id="step2" class="section">
    <h2>Step 2: Preferences</h2>
    <div class="card">
      <label><input type="checkbox" class="pref" data-key="noEarly"> No classes before 10am</label><br>
      <label><input type="checkbox" class="pref" data-key="compact"> Compact schedule</label><br>
      <label><input type="checkbox" class="pref" data-key="minBreaks"> Minimize breaks</label>
      <p class="note">Preferences guide how lectures, tutorials, and labs are arranged in options below.</p>
    </div>
    <button class="btn" onclick="nextStep('step3',3)">Next â†’</button>
  </div>

  <!-- Step 3 -->
  <div id="step3" class="section">
    <h2>Step 3: Timetable Options</h2>
    <div class="card">
      <h3>Option A â€” Compact</h3>
      <div id="optionA" class="timetable"></div>
      <button class="btn selectBtn" data-option="A">Select Option A</button>
    </div>
    <div class="card">
      <h3>Option B â€” Balanced</h3>
      <div id="optionB" class="timetable"></div>
      <button class="btn selectBtn" data-option="B">Select Option B</button>
    </div>
    <div class="card">
      <h3>Option C â€” Late start</h3>
      <div id="optionC" class="timetable"></div>
      <button class="btn selectBtn" data-option="C">Select Option C</button>
    </div>
  </div>

  <!-- Step 4 -->
  <div id="confirmation" class="section">
    <h2>Schedule Confirmed</h2>
    <p id="chosenText"></p>
    <div id="preview" class="timetable"></div>
    <div id="breakdown"></div>
    <button class="btn" onclick="restart()">Back to Start</button>
  </div>

</div>

<script>
  // Elements
  const electiveToggle = document.getElementById('electiveToggle');
  const electiveSelect = document.getElementById('electiveSelect');

  // Summary bar: count + credits
  function updateSummary() {
    const inputs = document.querySelectorAll('.course-input');
    let count = 0;
    let credits = 0;
    inputs.forEach(input => {
      if (input.checked) {
        count++;
        const c = parseFloat(input.dataset.credits || '0');
        credits += isNaN(c) ? 0 : c;
      }
    });
    document.getElementById('selectedCount').textContent = count;
    document.getElementById('creditTotal').textContent = credits.toFixed(1);
  }

  // Toggle elective dropdown
  electiveToggle.addEventListener('change', () => {
    electiveSelect.disabled = !electiveToggle.checked;
    if (!electiveToggle.checked) electiveSelect.value = '';
    updateSummary();
  });
  electiveSelect.addEventListener('change', () => {
    // No-op for credits (same 0.5 either way), but you could reflect chosen elective name elsewhere
  });

  // Update summary when any course checkbox changes
  document.querySelectorAll('.course-input').forEach(el => el.addEventListener('change', updateSummary));
  updateSummary();

  // Navigation
  function nextStep(stepId, progressNum) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(stepId).classList.add('active');
    updateProgress(progressNum);
    if (stepId === 'step3') buildOptions();
  }
  function updateProgress(step) {
    document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
    const el = document.getElementById('progress' + step);
    if (el) el.classList.add('active');
  }
  function restart() {
    // Show step 1 and reset progress
    nextStep('step1', 1);
    // Reset elective
    electiveToggle.checked = false;
    electiveSelect.disabled = true;
    electiveSelect.value = '';
    // Uncheck all courses
    document.querySelectorAll('.course-input').forEach(el => { el.checked = false; });
    // Clear preferences
    document.querySelectorAll('.pref').forEach(el => { el.checked = false; });
    // Clear option grids & confirmation
    ['optionA','optionB','optionC','preview','breakdown'].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = '';
    });
    document.getElementById('chosenText').textContent = '';
    updateSummary();
  }

  // Data helpers
  function getSelectedCourses() {
    const inputs = document.querySelectorAll('.course-input');
    const courses = [];
    inputs.forEach(input => {
      if (input.checked) {
        const code = input.dataset.code;
        let title = input.dataset.title;
        // If elective is selected, reflect chosen name in title
        if (code === 'Basic Science Elective' && electiveSelect.value) {
          title = electiveSelect.value;
        }
        const components = (input.dataset.components || '').split(',').filter(Boolean);
        courses.push({ code, title, components });
      }
    });
    return courses;
  }

  // Simple layout: map components to columns Monâ€“Fri
  function toBlocks(course, offset=0) {
    return course.components.map((comp, idx) => {
      const short = comp === 'lecture' ? 'Lec' : comp === 'tutorial' ? 'Tut' : 'Lab';
      return {
        type: comp,
        label: `${course.code} ${short}`,
        col: (idx + offset) % 5 // distribute across days
      };
    });
  }

  function renderTimetable(containerId, courses) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    let blocks = [];
    courses.forEach((c, i) => { blocks = blocks.concat(toBlocks(c, i)); });
    blocks.forEach(b => {
      const div = document.createElement('div');
      div.className = `block ${b.type}`;
      div.style.gridColumn = (b.col + 1);
      div.textContent = b.label;
      container.appendChild(div);
    });
    if (blocks.length === 0) {
      container.innerHTML = '<p class="note">No courses selected yet.</p>';
    }
  }

  function buildOptions() {
    const courses = getSelectedCourses();
    renderTimetable('optionA', courses);
    renderTimetable('optionB', courses);
    renderTimetable('optionC', courses);
  }

  // Option selection â†’ confirmation
  document.querySelectorAll('.selectBtn').forEach(btn => {
    btn.addEventListener('click', () => {
      const chosen = btn.dataset.option || 'A';
      const courses = getSelectedCourses();
      // Navigate
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById('confirmation').classList.add('active');
      updateProgress(4);
      // Message
      document.getElementById('chosenText').innerHTML =
        `You selected <strong>Option ${chosen}</strong>. Lectures, tutorials, and labs are included.`;
      // Preview timetable
      renderTimetable('preview', courses);
      // Breakdown
      const breakdown = document.getElementById('breakdown');
      breakdown.innerHTML = '';
      courses.forEach(c => {
        const text = `${c.code} â€” ${c.title}: ` + c.components.map(x =>
          x === 'lecture' ? 'Lecture' : x === 'tutorial' ? 'Tutorial' : 'Lab'
        ).join(' + ');
        const item = document.createElement('div');
        item.className = 'breakdown-item';
        item.textContent = text;
        breakdown.appendChild(item);
      });
      if (courses.length === 0) {
        breakdown.innerHTML = '<p class="note">No courses selected. Go Back to Start to pick courses.</p>';
      }
    });
  });
</script>
</body>
</html>
